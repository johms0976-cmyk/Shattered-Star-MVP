<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Shattered Star - A sci-fi noir cosmic horror deckbuilding RPG">
    <meta name="theme-color" content="#0a0a1a">
    
    <title>Shattered Star</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Source+Code+Pro:wght@400;600&family=Cinzel:wght@400;700&family=VT323&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components/cards.css">
    <link rel="stylesheet" href="css/components/combat.css">
    <link rel="stylesheet" href="css/components/map.css">
    <link rel="stylesheet" href="css/components/ui.css">
    
    <!-- Corruption themes (dynamically loaded) -->
    <link id="corruption-theme" rel="stylesheet" href="css/themes/corruption-0.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="assets/images/ui/favicon.svg">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="screen active">
        <div class="loading-content">
            <div class="loading-logo">
                <svg class="star-icon" viewBox="0 0 100 100">
                    <polygon class="star-fragment f1" points="50,5 55,35 50,30 45,35" fill="currentColor"/>
                    <polygon class="star-fragment f2" points="95,50 65,55 70,50 65,45" fill="currentColor"/>
                    <polygon class="star-fragment f3" points="50,95 45,65 50,70 55,65" fill="currentColor"/>
                    <polygon class="star-fragment f4" points="5,50 35,45 30,50 35,55" fill="currentColor"/>
                    <circle class="star-core" cx="50" cy="50" r="8" fill="currentColor"/>
                </svg>
            </div>
            <h1 class="loading-title">SHATTERED STAR</h1>
            <div class="loading-bar-container">
                <div class="loading-bar">
                    <div class="loading-progress" id="loading-progress"></div>
                </div>
                <p class="loading-text" id="loading-text">Initializing...</p>
            </div>
        </div>
    </div>

    <!-- Title Screen -->
    <div id="title-screen" class="screen">
        <div class="title-background">
            <div class="star-field"></div>
            <div class="void-tendrils"></div>
        </div>
        <div class="title-content">
            <div class="title-logo">
                <h1 class="game-title">
                    <span class="title-shattered">SHATTERED</span>
                    <span class="title-star">STAR</span>
                </h1>
                <p class="title-tagline">The void remembers.</p>
            </div>
            <nav class="title-menu">
                <button class="menu-btn" id="btn-new-game">
                    <span class="btn-text">NEW GAME</span>
                    <span class="btn-glow"></span>
                </button>
                <button class="menu-btn" id="btn-continue" disabled>
                    <span class="btn-text">CONTINUE</span>
                    <span class="btn-glow"></span>
                </button>
                <button class="menu-btn" id="btn-settings">
                    <span class="btn-text">SETTINGS</span>
                    <span class="btn-glow"></span>
                </button>
                <button class="menu-btn" id="btn-codex" disabled>
                    <span class="btn-text">CODEX</span>
                    <span class="btn-glow"></span>
                </button>
            </nav>
            <p class="version-text">v0.1.0 MVP</p>
        </div>
    </div>

    <!-- Hero Select Screen -->
    <div id="hero-select-screen" class="screen">
        <div class="screen-header">
            <h2>SELECT YOUR OPERATIVE</h2>
            <button class="back-btn" id="btn-back-title">‚Üê BACK</button>
        </div>
        <div class="hero-select-container">
            <div class="hero-cards" id="hero-cards">
                <!-- Hero cards populated by JS -->
            </div>
            <div class="hero-details" id="hero-details">
                <div class="hero-portrait" id="hero-portrait"></div>
                <div class="hero-info">
                    <h3 id="hero-name">Select a Hero</h3>
                    <p class="hero-title" id="hero-title"></p>
                    <p class="hero-desc" id="hero-desc"></p>
                    <div class="hero-stats" id="hero-stats"></div>
                    <div class="hero-archetypes" id="hero-archetypes"></div>
                </div>
            </div>
        </div>
        <button class="start-run-btn" id="btn-start-run" disabled>
            <span>BEGIN DESCENT</span>
        </button>
    </div>

    <!-- Intro/Cutscene Screen -->
    <div id="intro-screen" class="screen">
        <div class="intro-container">
            <div class="intro-text" id="intro-text"></div>
            <button class="skip-btn" id="btn-skip-intro">SKIP ‚Üí</button>
        </div>
    </div>

    <!-- Boss Intro Screen -->
    <div id="boss-intro-screen" class="screen">
        <div class="boss-intro-container">
            <div class="boss-intro-warning">‚ö† BOSS ENCOUNTER ‚ö†</div>
            <div class="boss-intro-name" id="boss-intro-name">SCRAP-KING</div>
            <div class="boss-intro-title" id="boss-intro-title">Warlord of the Wastes</div>
            <div class="boss-intro-image" id="boss-intro-image"></div>
        </div>
    </div>

    <!-- Map Screen -->
    <div id="map-screen" class="screen">
        <div class="map-header">
            <div class="player-stats">
                <div class="stat hp">
                    <span class="stat-icon">‚ô•</span>
                    <span class="stat-value" id="map-hp">80/80</span>
                </div>
                <div class="stat credits">
                    <span class="stat-icon">‚óà</span>
                    <span class="stat-value" id="map-credits">100</span>
                </div>
                <div class="stat corruption">
                    <span class="stat-icon">‚óâ</span>
                    <span class="stat-value" id="map-corruption">0%</span>
                </div>
            </div>
            <div class="act-info">
                <h2 id="act-title">ACT I: ASHES OF IRONSPINE</h2>
            </div>
            <div class="map-actions">
                <button class="icon-btn" id="btn-deck">
                    <span class="icon">üìö</span>
                    <span class="label">DECK</span>
                </button>
                <button class="icon-btn" id="btn-artifacts">
                    <span class="icon">üíé</span>
                    <span class="label">RELICS</span>
                </button>
                <button class="icon-btn" id="btn-map-menu">
                    <span class="icon">‚ò∞</span>
                    <span class="label">MENU</span>
                </button>
            </div>
        </div>
        <div class="map-container" id="map-container">
            <canvas id="map-canvas"></canvas>
            <div class="map-nodes" id="map-nodes"></div>
        </div>
    </div>

    <!-- Combat Screen -->
    <div id="combat-screen" class="screen">
        <div class="combat-container">
            <!-- Enemy Area -->
            <div class="enemy-area" id="enemy-area">
                <!-- Enemies populated by JS -->
            </div>
            
            <!-- Battle Effects Layer -->
            <div class="effects-layer" id="effects-layer"></div>
            
            <!-- Player Area -->
            <div class="player-area">
                <div class="player-character" id="player-character">
                    <div class="player-sprite"></div>
                    <div class="player-stats-combat">
                        <div class="stat-block">
                            <span class="block-icon">üõ°</span>
                            <span class="block-value" id="combat-block">0</span>
                        </div>
                        <div class="stat-hp-bar">
                            <div class="hp-fill" id="combat-hp-fill"></div>
                            <span class="hp-text" id="combat-hp-text">80/80</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Hand Area -->
            <div class="hand-area" id="hand-area">
                <!-- Cards populated by JS -->
            </div>
            
            <!-- Combat UI -->
            <div class="combat-ui">
                <div class="energy-display">
                    <span class="energy-current" id="energy-current">3</span>
                    <span class="energy-divider">/</span>
                    <span class="energy-max" id="energy-max">3</span>
                </div>
                <button class="end-turn-btn" id="btn-end-turn">END TURN</button>
                <div class="deck-piles">
                    <div class="pile draw-pile" id="draw-pile">
                        <span class="pile-count">0</span>
                        <span class="pile-label">DRAW</span>
                    </div>
                    <div class="pile discard-pile" id="discard-pile">
                        <span class="pile-count">0</span>
                        <span class="pile-label">DISCARD</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Event Screen -->
    <div id="event-screen" class="screen">
        <div class="event-container">
            <div class="event-image" id="event-image"></div>
            <div class="event-content">
                <h2 class="event-title" id="event-title"></h2>
                <div class="event-text" id="event-text"></div>
                <div class="event-choices" id="event-choices">
                    <!-- Choices populated by JS -->
                </div>
            </div>
        </div>
    </div>

    <!-- Shop Screen -->
    <div id="shop-screen" class="screen">
        <div class="shop-container">
            <div class="shop-header">
                <h2>RUSTBORN TRADER</h2>
                <div class="shop-credits">
                    <span class="icon">‚óà</span>
                    <span id="shop-credits">100</span>
                </div>
            </div>
            <div class="shop-sections">
                <div class="shop-section cards-section">
                    <h3>CARDS</h3>
                    <div class="shop-items" id="shop-cards"></div>
                </div>
                <div class="shop-section artifacts-section">
                    <h3>RELICS</h3>
                    <div class="shop-items" id="shop-artifacts"></div>
                </div>
                <div class="shop-section services-section">
                    <h3>SERVICES</h3>
                    <div class="shop-items" id="shop-services"></div>
                </div>
            </div>
            <button class="leave-btn" id="btn-leave-shop">LEAVE</button>
        </div>
    </div>

    <!-- Rest Screen -->
    <div id="rest-screen" class="screen">
        <div class="rest-container">
            <div class="rest-visual">
                <div class="campfire"></div>
            </div>
            <h2>REST SITE</h2>
            <p class="rest-flavor">A moment of respite in the wasteland...</p>
            <div class="rest-options">
                <button class="rest-option" id="btn-rest-heal">
                    <span class="option-icon">‚ô•</span>
                    <span class="option-text">REST</span>
                    <span class="option-desc">Heal 30% of max HP</span>
                </button>
                <button class="rest-option" id="btn-rest-upgrade">
                    <span class="option-icon">‚¨Ü</span>
                    <span class="option-text">UPGRADE</span>
                    <span class="option-desc">Enhance a card</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Reward Screen -->
    <div id="reward-screen" class="screen">
        <div class="reward-container">
            <h2>VICTORY</h2>
            <div class="rewards" id="rewards">
                <!-- Rewards populated by JS -->
            </div>
            <button class="proceed-btn" id="btn-proceed">PROCEED</button>
        </div>
    </div>

    <!-- Card Select Screen (for upgrades, etc) -->
    <div id="card-select-screen" class="screen">
        <div class="card-select-container">
            <h2 id="card-select-title">SELECT A CARD</h2>
            <div class="card-grid" id="card-select-grid">
                <!-- Cards populated by JS -->
            </div>
            <button class="cancel-btn" id="btn-cancel-select">CANCEL</button>
        </div>
    </div>

    <!-- Deck View Modal -->
    <div id="deck-modal" class="modal">
        <div class="modal-content deck-view">
            <div class="modal-header">
                <h2>YOUR DECK</h2>
                <button class="close-btn" id="btn-close-deck">√ó</button>
            </div>
            <div class="deck-cards" id="deck-view-cards"></div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal">
        <div class="modal-content settings">
            <div class="modal-header">
                <h2>SETTINGS</h2>
                <button class="close-btn" id="btn-close-settings">√ó</button>
            </div>
            <div class="settings-options">
                <div class="setting">
                    <label>Master Volume</label>
                    <input type="range" id="setting-master-volume" min="0" max="100" value="80">
                </div>
                <div class="setting">
                    <label>Music Volume</label>
                    <input type="range" id="setting-music-volume" min="0" max="100" value="70">
                </div>
                <div class="setting">
                    <label>SFX Volume</label>
                    <input type="range" id="setting-sfx-volume" min="0" max="100" value="80">
                </div>
                <div class="setting">
                    <label>Screen Shake</label>
                    <input type="checkbox" id="setting-screen-shake" checked>
                </div>
                <div class="setting">
                    <label>Corruption Effects</label>
                    <select id="setting-corruption-effects">
                        <option value="full">Full</option>
                        <option value="reduced">Reduced</option>
                        <option value="minimal">Minimal</option>
                    </select>
                </div>
            </div>
            <button class="save-btn" id="btn-save-settings">SAVE</button>
        </div>
    </div>

    <!-- Game Over Screen -->
    <div id="gameover-screen" class="screen">
        <div class="gameover-container">
            <h1 class="gameover-title">THE VOID CLAIMS ANOTHER</h1>
            <div class="gameover-stats" id="gameover-stats"></div>
            <div class="gameover-actions">
                <button class="menu-btn" id="btn-gameover-retry">TRY AGAIN</button>
                <button class="menu-btn" id="btn-gameover-menu">MAIN MENU</button>
            </div>
        </div>
    </div>

    <!-- Victory Screen -->
    <div id="victory-screen" class="screen">
        <div class="victory-container">
            <h1 class="victory-title">ACT COMPLETE</h1>
            <div class="victory-content" id="victory-content"></div>
            <button class="menu-btn" id="btn-continue-run">CONTINUE</button>
        </div>
    </div>

    <audio id="music-player" loop></audio>

    <!-- Scripts - ES6 Modules -->
    <script type="module" src="js/main.js"></script>
</body>
</html>
